{"ast":null,"code":"import { JwtHelperService } from \"@auth0/angular-jwt\";\nimport { BehaviorSubject, map, of } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport class AuthService {\n  constructor(router) {\n    this.router = router;\n    this.userInfo = new BehaviorSubject(null);\n    this.jwtHelper = new JwtHelperService();\n  }\n  setToken(login) {\n    localStorage.setItem('token', login);\n    if (login && login.username && login.password) {\n      const sampleJWT = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6IlRlc3QiLCJzdWIiOjIsImlhdCI6MTYwNDMwOTc0OSwiZXhwIjoxNjA0MzA5ODA5fQ.jHez9kegJ7GT1AO5A2fQp6Dg9A6PBmeiDW1YPaCQoYs\";\n      return of(sampleJWT).pipe(map(token => {\n        if (!token) {\n          return false;\n        }\n        localStorage.setItem('access_token', token);\n        const decodedUser = this.jwtHelper.decodeToken(token);\n        this.userInfo.next(decodedUser);\n        return true;\n      }));\n    }\n    return of(false);\n  }\n  isLoggedIn() {\n    return localStorage.getItem('access_token') ? true : false;\n  }\n  doLogout() {\n    let removeToken = localStorage.removeItem('access_token');\n    if (removeToken == null) {\n      this.router.navigate(['login']);\n    }\n  }\n}\nAuthService.ɵfac = function AuthService_Factory(t) {\n  return new (t || AuthService)(i0.ɵɵinject(i1.Router));\n};\nAuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthService,\n  factory: AuthService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["JwtHelperService","BehaviorSubject","map","of","AuthService","constructor","router","userInfo","jwtHelper","setToken","login","localStorage","setItem","username","password","sampleJWT","pipe","token","decodedUser","decodeToken","next","isLoggedIn","getItem","doLogout","removeToken","removeItem","navigate","i0","ɵɵinject","i1","Router","factory","ɵfac","providedIn"],"sources":["C:\\Users\\MVPINFOTECH\\Angularproject\\MVP\\src\\app\\services\\auth.services.ts"],"sourcesContent":["import { Injectable } from \"@angular/core\";\r\nimport { Router } from \"@angular/router\";\r\nimport { JwtHelperService } from \"@auth0/angular-jwt\";\r\nimport { BehaviorSubject, Observable, map, of } from \"rxjs\";\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n  })\r\n  \r\n  export class AuthService{\r\n\r\nconstructor(private router: Router){}\r\n\r\n\r\nuserInfo = new BehaviorSubject(null);\r\njwtHelper = new JwtHelperService();\r\n\r\nsetToken(login:any):Observable<boolean>{\r\n    localStorage.setItem('token',login)\r\n    if(login &&\r\n    login.username &&\r\n    login.password){\r\n     const sampleJWT = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6IlRlc3QiLCJzdWIiOjIsImlhdCI6MTYwNDMwOTc0OSwiZXhwIjoxNjA0MzA5ODA5fQ.jHez9kegJ7GT1AO5A2fQp6Dg9A6PBmeiDW1YPaCQoYs\";\r\n   \r\n     return of(sampleJWT).pipe(\r\n     map((token) => {\r\n      if(!token){\r\n          return false;\r\n      }\r\n      localStorage.setItem('access_token', token);\r\n      const decodedUser = this.jwtHelper.decodeToken(token);\r\n      this.userInfo.next(decodedUser);\r\n      return true;\r\n     }));\r\n    }\r\n    return of(false);\r\n  }\r\n\r\n    isLoggedIn() : boolean{\r\n        return localStorage.getItem('access_token')? true:false;\r\n    }\r\n    \r\n    doLogout() {\r\n        let removeToken = localStorage.removeItem('access_token');\r\n        if (removeToken == null) {\r\n          this.router.navigate(['login']);\r\n        }\r\n      }\r\n\r\n  }\r\n"],"mappings":"AAEA,SAASA,gBAAgB,QAAQ,oBAAoB;AACrD,SAASC,eAAe,EAAcC,GAAG,EAAEC,EAAE,QAAQ,MAAM;;;AAMzD,OAAM,MAAOC,WAAW;EAE1BC,YAAoBC,MAAc;IAAd,KAAAA,MAAM,GAANA,MAAM;IAG1B,KAAAC,QAAQ,GAAG,IAAIN,eAAe,CAAC,IAAI,CAAC;IACpC,KAAAO,SAAS,GAAG,IAAIR,gBAAgB,EAAE;EAJE;EAMpCS,QAAQA,CAACC,KAAS;IACdC,YAAY,CAACC,OAAO,CAAC,OAAO,EAACF,KAAK,CAAC;IACnC,IAAGA,KAAK,IACRA,KAAK,CAACG,QAAQ,IACdH,KAAK,CAACI,QAAQ,EAAC;MACd,MAAMC,SAAS,GAAG,qKAAqK;MAEvL,OAAOZ,EAAE,CAACY,SAAS,CAAC,CAACC,IAAI,CACzBd,GAAG,CAAEe,KAAK,IAAI;QACb,IAAG,CAACA,KAAK,EAAC;UACN,OAAO,KAAK;;QAEhBN,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEK,KAAK,CAAC;QAC3C,MAAMC,WAAW,GAAG,IAAI,CAACV,SAAS,CAACW,WAAW,CAACF,KAAK,CAAC;QACrD,IAAI,CAACV,QAAQ,CAACa,IAAI,CAACF,WAAW,CAAC;QAC/B,OAAO,IAAI;MACZ,CAAC,CAAC,CAAC;;IAEJ,OAAOf,EAAE,CAAC,KAAK,CAAC;EAClB;EAEEkB,UAAUA,CAAA;IACN,OAAOV,YAAY,CAACW,OAAO,CAAC,cAAc,CAAC,GAAE,IAAI,GAAC,KAAK;EAC3D;EAEAC,QAAQA,CAAA;IACJ,IAAIC,WAAW,GAAGb,YAAY,CAACc,UAAU,CAAC,cAAc,CAAC;IACzD,IAAID,WAAW,IAAI,IAAI,EAAE;MACvB,IAAI,CAAClB,MAAM,CAACoB,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;;EAEnC;;AAtCStB,WAAW,C;mBAAXA,WAAW,EAAAuB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,MAAA;AAAA;AAAX1B,WAAW,C;SAAXA,WAAW;EAAA2B,OAAA,EAAX3B,WAAW,CAAA4B,IAAA;EAAAC,UAAA,EAHV;AAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}