{"ast":null,"code":"import { BehaviorSubject, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { JwtHelperService } from \"@auth0/angular-jwt\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nexport class AuthGuard {\n  constructor(router, http) {\n    this.router = router;\n    this.http = http;\n    this.userInfo = new BehaviorSubject(null);\n    this.jwtHelper = new JwtHelperService();\n  }\n  userLogin(login) {\n    if (login && login.userId && login.password) {\n      const sampleJWT = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6IlRlc3QiLCJzdWIiOjIsImlhdCI6MTYwNDMwOTc0OSwiZXhwIjoxNjA0MzA5ODA5fQ.jHez9kegJ7GT1AO5A2fQp6Dg9A6PBmeiDW1YPaCQoYs\";\n      return of(sampleJWT).pipe(map(token => {\n        if (!token) {\n          return false;\n        }\n        localStorage.setItem(\"access_token\", token);\n        const decodedUser = this.jwtHelper.decodeToken(token);\n        this.userInfo.next(decodedUser);\n        return true;\n      }));\n    }\n    return of(false);\n  }\n  isLoggedIn() {\n    return localStorage.getItem('access_token') ? true : false;\n  }\n  doLogout() {\n    let removeToken = localStorage.removeItem('access_token');\n    if (removeToken == null) {\n      this.router.navigate(['login']);\n    }\n  }\n  canActivate(route, state) {\n    return this.isLoggedIn();\n  }\n}\nAuthGuard.ɵfac = function AuthGuard_Factory(t) {\n  return new (t || AuthGuard)(i0.ɵɵinject(i1.Router), i0.ɵɵinject(i2.HttpClient));\n};\nAuthGuard.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthGuard,\n  factory: AuthGuard.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["BehaviorSubject","of","map","JwtHelperService","AuthGuard","constructor","router","http","userInfo","jwtHelper","userLogin","login","userId","password","sampleJWT","pipe","token","localStorage","setItem","decodedUser","decodeToken","next","isLoggedIn","getItem","doLogout","removeToken","removeItem","navigate","canActivate","route","state","i0","ɵɵinject","i1","Router","i2","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\MVPINFOTECH\\Angularproject\\MVP\\src\\app\\services\\auth.guard.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { CanActivate, ActivatedRouteSnapshot , RouterStateSnapshot, UrlTree, Router } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\n\nimport { BehaviorSubject, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { JwtHelperService } from \"@auth0/angular-jwt\";\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class AuthGuard implements CanActivate {\n\n  userInfo = new BehaviorSubject(null);\n  jwtHelper = new JwtHelperService();\n\n  constructor( private router: Router, private http: HttpClient){}\n\n\n  userLogin(login:any):Observable<boolean>{\n    if(login &&\n    login.userId &&\n    login.password){\n     const sampleJWT = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6IlRlc3QiLCJzdWIiOjIsImlhdCI6MTYwNDMwOTc0OSwiZXhwIjoxNjA0MzA5ODA5fQ.jHez9kegJ7GT1AO5A2fQp6Dg9A6PBmeiDW1YPaCQoYs\";\n   \n     return of(sampleJWT).pipe(\n     map((token) => {\n    if(!token){\n      return false;\n    }\n    localStorage.setItem(\"access_token\", token);\n    const decodedUser = this.jwtHelper.decodeToken(token);\n    this.userInfo.next(decodedUser);\n    return true;\n     }));\n    }\n    return of(false);\n  }\n  \n  isLoggedIn() : boolean{\n      return localStorage.getItem('access_token')? true:false;\n  }\n  \n  doLogout() {\n      let removeToken = localStorage.removeItem('access_token');\n      if (removeToken == null) {\n        this.router.navigate(['login']);\n      }\n    }\n\n  canActivate(\n    route : ActivatedRouteSnapshot,\n    state : RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree{\n      return this.isLoggedIn();\n    }\n}\n"],"mappings":"AAKA,SAASA,eAAe,EAAEC,EAAE,QAAQ,MAAM;AAC1C,SAASC,GAAG,QAAQ,gBAAgB;AACpC,SAASC,gBAAgB,QAAQ,oBAAoB;;;;AAMrD,OAAM,MAAOC,SAAS;EAKpBC,YAAqBC,MAAc,EAAUC,IAAgB;IAAxC,KAAAD,MAAM,GAANA,MAAM;IAAkB,KAAAC,IAAI,GAAJA,IAAI;IAHjD,KAAAC,QAAQ,GAAG,IAAIR,eAAe,CAAC,IAAI,CAAC;IACpC,KAAAS,SAAS,GAAG,IAAIN,gBAAgB,EAAE;EAE6B;EAG/DO,SAASA,CAACC,KAAS;IACjB,IAAGA,KAAK,IACRA,KAAK,CAACC,MAAM,IACZD,KAAK,CAACE,QAAQ,EAAC;MACd,MAAMC,SAAS,GAAG,qKAAqK;MAEvL,OAAOb,EAAE,CAACa,SAAS,CAAC,CAACC,IAAI,CACzBb,GAAG,CAAEc,KAAK,IAAI;QACf,IAAG,CAACA,KAAK,EAAC;UACR,OAAO,KAAK;;QAEdC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEF,KAAK,CAAC;QAC3C,MAAMG,WAAW,GAAG,IAAI,CAACV,SAAS,CAACW,WAAW,CAACJ,KAAK,CAAC;QACrD,IAAI,CAACR,QAAQ,CAACa,IAAI,CAACF,WAAW,CAAC;QAC/B,OAAO,IAAI;MACV,CAAC,CAAC,CAAC;;IAEJ,OAAOlB,EAAE,CAAC,KAAK,CAAC;EAClB;EAEAqB,UAAUA,CAAA;IACN,OAAOL,YAAY,CAACM,OAAO,CAAC,cAAc,CAAC,GAAE,IAAI,GAAC,KAAK;EAC3D;EAEAC,QAAQA,CAAA;IACJ,IAAIC,WAAW,GAAGR,YAAY,CAACS,UAAU,CAAC,cAAc,CAAC;IACzD,IAAID,WAAW,IAAI,IAAI,EAAE;MACvB,IAAI,CAACnB,MAAM,CAACqB,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;;EAEnC;EAEFC,WAAWA,CACTC,KAA8B,EAC9BC,KAA2B;IACzB,OAAO,IAAI,CAACR,UAAU,EAAE;EAC1B;;AA3CSlB,SAAS,C;mBAATA,SAAS,EAAA2B,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,MAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,UAAA;AAAA;AAAThC,SAAS,C;SAATA,SAAS;EAAAiC,OAAA,EAATjC,SAAS,CAAAkC,IAAA;EAAAC,UAAA,EAHR;AAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}